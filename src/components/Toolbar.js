import React, {useState, useEffect} from 'react'
import './Toolbar.css'
import LayerManager from './layermanager/layer-manager'
import InnudateAnalysis from './inundate-analysis/inundate-analysis'
import DrawViewer from './draw-viewer/draw-viewer'
import MENUTYPE from './menu-type'


export default function Toolbar(props) {

    const [currentMenu, SetCurrentMenu] = useState(MENUTYPE.NONE);
    const viewer = props.viewer;
    
    const fly2HomeView = () => {
        // 将三维球定位到中国
        viewer.camera.flyTo({
            destination: Cesium.Cartesian3.fromDegrees(103.84, 31.15, 17850000),
            orientation: {
                heading: Cesium.Math.toRadians(348.4202942851978),
                pitch: Cesium.Math.toRadians(-89.74026687972041),
                roll: Cesium.Math.toRadians(0),
            }
        });
    }

    const toggleMenu = (mt) => {
        if(mt === currentMenu) {
            // 如果点击当前已经打开的菜单，则关闭
            SetCurrentMenu(MENUTYPE.NONE);
        } else {
            SetCurrentMenu(mt);
        }
    }

    return (        
        <div className="app-toolbar">
            <button className="cesium-toolbar-button cesium-button" onClick={fly2HomeView}>
                <svg className="cesium-svgPath-svg" width="28" height="28" viewBox="0 0 28 28"><path d="M14,4l-10,8.75h20l-4.25-3.7188v-4.6562h-2.812v2.1875l-2.938-2.5625zm-7.0938,9.906v10.094h14.094v-10.094h-14.094zm2.1876,2.313h3.3122v4.25h-3.3122v-4.25zm5.8442,1.281h3.406v6.438h-3.406v-6.438z"></path></svg>
            </button>
            <>
                <button className="cesium-toolbar-button cesium-button" onClick={()=>toggleMenu(MENUTYPE.LAYERMANAGER)}>
                    <svg t="1600757667604" className="cesium-svgPath-svg" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7282" width="32" height="32"><path d="M942.933 311.467l-384-192c-25.6-17.067-55.466-17.067-81.066 0l-384 192c0 4.266-4.267 8.533-8.534 8.533-4.266 17.067 0 34.133 12.8 38.4l136.534 68.267-115.2 59.733c-12.8 8.533-21.334 21.333-21.334 34.133 0 12.8 8.534 29.867 21.334 34.134l98.133 51.2-98.133 51.2c-12.8 8.533-21.334 21.333-21.334 34.133 0 12.8 8.534 29.867 21.334 34.133l358.4 179.2c12.8 8.534 25.6 12.8 38.4 12.8 12.8 0 29.866-4.266 42.666-12.8l358.4-179.2c12.8-8.533 21.334-21.333 21.334-34.133 0-12.8-8.534-29.867-21.334-34.133l-98.133-51.2 98.133-51.2c12.8-8.534 21.334-21.334 21.334-34.134s-8.534-29.866-21.334-34.133L806.4 426.667 942.933 358.4c4.267-4.267 8.534-4.267 8.534-8.533 4.266-17.067 0-34.134-8.534-38.4zM861.867 691.2L533.333 857.6c-8.533 4.267-17.066 4.267-25.6 0L179.2 691.2l106.667-55.467 196.266 98.134c12.8 8.533 25.6 12.8 38.4 12.8 12.8 0 29.867-4.267 42.667-12.8l196.267-98.134 102.4 55.467z m0-170.667L755.2 576l-64 29.867-162.133 81.066c-8.534 4.267-17.067 4.267-25.6 0l-162.134-81.066-64-29.867-106.666-55.467 128-64L482.133 550.4c25.6 17.067 55.467 17.067 81.067 0l183.467-93.867 115.2 64z" p-id="7283"></path></svg>
                </button>
                <LayerManager 
                    viewer={viewer} 
                    show={currentMenu === MENUTYPE.LAYERMANAGER} 
                    closeMenu={()=>SetCurrentMenu(MENUTYPE.NONE)}></LayerManager>
            </>
            <>
                <button className="cesium-toolbar-button cesium-button" onClick={()=>toggleMenu(MENUTYPE.INNUDATEANALYSIS)}>
                    <svg t="1601017114611" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3163" width="32" height="32"><path d="M609.28 789.504c23.04 0 46.08 7.68 64 21.504l35.84 27.136c11.776 9.216 29.184 9.216 40.96 0l35.84-27.136c18.432-13.824 40.96-21.504 64.512-21.504s45.568 7.68 64.512 21.504l36.352 27.136c15.872 12.288 18.944 34.816 6.656 50.688-12.288 15.872-34.816 18.944-50.688 7.168l-35.84-27.136c-11.264-9.216-28.672-9.216-40.96 0l-35.84 27.136c-18.432 13.824-40.96 21.504-64.512 21.504-23.04 0-45.568-7.68-64.512-21.504l-35.84-27.136c-12.288-9.216-28.672-9.216-40.96 0l-35.84 27.136c-18.432 14.336-41.472 21.504-64.512 21.504s-46.08-7.68-64.512-21.504l-35.84-27.136c-11.264-9.216-29.184-9.216-40.96 0l-35.84 27.136c-18.432 13.824-40.96 21.504-64.512 21.504-23.04 0-45.568-7.68-64.512-21.504l-35.84-27.136c-12.288-9.216-28.672-9.216-40.96 0l-47.104 35.84c-15.36 11.776-38.912 8.704-50.688-7.168a38.4 38.4 0 0 1-7.168-26.624c1.024-9.728 6.144-17.92 13.824-24.064l47.104-35.84c18.432-13.824 40.96-21.504 64.512-21.504s45.568 7.68 64.512 21.504l35.84 27.136c11.776 8.704 29.184 8.704 40.96 0l35.84-27.136c18.432-13.824 40.96-21.504 64-21.504s46.08 7.68 64.512 21.504l35.84 27.136c11.264 8.704 29.184 9.216 40.96 0l35.84-27.136c19.456-13.824 41.984-21.504 65.024-21.504zM463.872 69.12l5.632 2.048 553.472 203.776-2.048 5.12-128 356.352c13.312 3.584 24.576 9.216 33.792 16.384l35.84 27.136c7.68 5.632 12.8 14.848 13.824 24.064 1.024 9.216-1.536 18.944-7.168 26.624-12.288 15.872-34.816 18.944-50.688 7.168l-35.84-27.136c-12.288-8.704-28.672-8.704-40.96 0l-35.84 27.136c-18.432 13.824-40.96 21.504-64.512 21.504-23.04 0-45.568-7.68-64.512-21.504l-35.84-27.136c-12.288-8.704-28.672-8.704-40.96 0l-35.84 27.136c-18.432 14.336-41.472 21.504-64.512 21.504s-46.08-7.68-64.512-21.504l-35.84-27.136c-12.288-9.216-28.672-9.216-40.96 0l-35.84 27.136c-18.432 13.824-40.96 21.504-64.512 21.504-23.04 0-45.568-7.68-64.512-21.504l-35.84-27.136c-12.288-9.216-28.672-9.216-40.96 0l-47.104 35.84c-15.872 12.288-38.912 8.704-50.688-7.168-5.632-7.68-8.192-17.408-7.168-27.136 1.024-9.728 6.144-17.92 13.824-24.064l47.104-35.328c37.376-28.16 91.136-28.16 128.512 0l35.84 27.136c5.632 4.608 13.312 6.656 20.48 6.656 1.024 0 2.56 0 3.584-0.512L463.872 69.12z m43.52 92.672l-148.992 471.04c7.168-1.536 14.336-2.56 20.992-2.56 23.04 0 46.08 7.68 64.512 21.504l35.84 27.136c11.264 8.704 29.184 8.704 40.96 0l35.84-27.136c37.888-28.672 90.624-28.672 128.512 0l35.84 27.136c11.776 9.216 29.184 9.216 40.96 0l35.84-27.136c2.56-2.048 5.12-3.072 7.68-4.096 0.512-0.512 1.536-1.024 2.048-1.024L929.792 317.44 507.392 161.792z m177.664 377.856l94.72 34.816-25.088 68.608-94.72-34.816 25.088-68.608z m-179.2-60.928l94.72 34.816-25.088 68.608-94.72-34.816 25.088-68.608z m224.256-48.128l94.72 34.816-25.088 68.608-94.72-34.816 25.088-68.608z m-179.2-66.048L645.12 399.36l-25.088 68.608-94.72-34.816 25.6-68.608z m216.576-59.392l94.72 34.816-25.088 68.608-95.232-34.816 25.6-68.608z m-179.712-66.048l94.72 34.816-25.088 68.608-94.72-34.816 25.088-68.608z" p-id="3164"></path></svg>
                </button>
                <InnudateAnalysis 
                    viewer={viewer} 
                    show={currentMenu === MENUTYPE.INNUDATEANALYSIS}
                    closeMenu={()=>SetCurrentMenu(MENUTYPE.NONE)}></InnudateAnalysis>
            </>
            <>
                <button className="cesium-toolbar-button cesium-button" onClick={()=>toggleMenu(MENUTYPE.DRAWVIEWER)}>
                    <svg t="1601271939227" viewBox="0 0 1024 1024" width="28" height="28"><path d="M0 100a100 100 0 1 0 200 0 100 100 0 1 0-200 0zM0 924a100 100 0 1 0 200 0 100 100 0 1 0-200 0zM824 100a100 100 0 1 0 200 0 100 100 0 1 0-200 0z" p-id="3836"></path><path d="M100 50h824v100H100z m0 824h340.4v100H100z" p-id="3837"></path><path d="M150 100v824H50V100z m823.977-0.023v345.8h-100v-345.8zM818.9 529.529l140.925 140.925-289.274 289.275-140.925-140.925zM973.2 657.1L832.3 516.2l38.4-38.4c16.6-16.6 43.5-16.6 60.1 0l80.8 80.8c16.6 16.6 16.6 43.5 0 60.1l-38.4 38.4zM467.1 1024l190.1-51L518 833.8z" p-id="3838"></path></svg>
                </button>
                <DrawViewer 
                    viewer={viewer} 
                    show={currentMenu === MENUTYPE.DRAWVIEWER}
                    closeMenu={()=>SetCurrentMenu(MENUTYPE.NONE)}></DrawViewer>
            </>
        </div>
    );
}